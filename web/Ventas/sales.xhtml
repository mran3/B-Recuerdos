<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Recuerdos :: Ventas</title>
        <meta name="author" content="The Author"></meta>
    </h:head>
    <h:body style="padding-top: 50px; padding-bottom: 20px;">
        <b:navBar brand="Bank" brandHref="/Bank/faces/index.xhtml" inverse="true" fixed="top">
            <b:navbarLinks>
                <b:dropMenu value="Items">
                    <b:navLink value="Create Item" outcome="createItem"></b:navLink>
                    <b:navLink value="Consult Item" outcome="consultItem"></b:navLink>
                    <b:navLink value="Update Item" outcome="updateItem"></b:navLink>
                    <b:navLink value="Delete Item" outcome="deleteItem"></b:navLink>

                </b:dropMenu>
            </b:navbarLinks>
            <h:form styleClass="navbar-form navbar-right">
                <b:commandButton value="Sign Out" look="danger" icon="log-out" iconAlign="left"/>
            </h:form>
        </b:navBar>
        <b:container>
            <h:form>
                <b:jumbotron>
                    <b:icon name="glyphicon glyphicon-euro" size="4x"/>
                    <h2>Items for sale</h2>
                </b:jumbotron>
            </h:form>
        </b:container>
        <b:container>
            <b:tab>
                <ui:repeat var="item" varStatus="status" value="#{itemBean.list}">  
                    <b:column col-md="3" offset="#{status.index%3}">
                        <b:panel title="iItem for sale" look="success">
                            <h3>#{status.index} - ID: #{item.id}</h3><br/>  
                            <h3>Name: #{item.name}</h3><br/>
                            <h5>Description #{item.description}</h5><br/>
                            <h5>Price: #{item.price}</h5><br/>
                            <h5>Stock: #{item.stock}</h5><br/>

                            <h:form>
                                <b:commandButton action="#{orderBean.addToCart(item.id, orderBean.quanty , item.price)}" value="Buy" look="success" icon="plus" iconAlign="left"/>
                            </h:form>  
                        </b:panel>
                    </b:column>


                </ui:repeat> 
            </b:tab>
        </b:container>
        <b:row></b:row>
        <b:row>
            <b:column col-md="6" offset="3">
                <b:panel title="Create Order" look="success">
                    <h:form styleClass="form-panel">
                        <b:datepicker id="Date" placeholder="Date" value="#{orderBean.date}" >
                            <f:facet name="prepend">
                                <b:icon name="pencil" />
                            </f:facet>
                        </b:datepicker>

                        <b:inputText id="ID" placeholder="ID" value="#{orderBean.id}" required="true" requiredMessage="The document is required!">
                            <f:facet name="prepend">
                                <b:icon name="pencil" />
                            </f:facet>
                        </b:inputText>

                        <b:inputText id="UserID" placeholder="UserID" value="#{orderBean.userId}">
                            <f:facet name="prepend">
                                <b:icon name="pencil" />
                            </f:facet>
                        </b:inputText>

                        <b:dataTable value="#{orderBean.solditemsCollection}" var="s">
                            <b:dataTableColumn value="#{s.items}" label="ID Item" />
                            <b:dataTableColumn value="#{s.quantity}" label="Quanty Item" />
                        </b:dataTable>

                        <h:panelGrid columns="3" cellpadding="5">
                            <h:column> </h:column>
                            <h:column> 
                                <b:inputText id="totalPrice"  label="Price" value="#{orderBean.totalPrice}" >
                                    <f:facet name="prepend">
                                        <b:icon name="euro" />
                                    </f:facet>
                                </b:inputText>
                            </h:column>

                        </h:panelGrid>
                        <b:commandButton action="#{orderBean.createOrder()}" value="Create" look="success" icon="plus" iconAlign="left"/>
                    </h:form>
                    <b:alert severity="success" title="Message" closable="true">#{orderBean.message}</b:alert>
                </b:panel>
            </b:column>
        </b:row>
    </h:body>
</html>



